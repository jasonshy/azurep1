<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Store Reclamation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="result-container" style="margin-top: 100px; text-align: center;">
        <h1 style="margin-bottom: 5px;">FreshCo #9637</h1> 
        <h3 style="color: #7f8c8d; margin-top: 0; font-weight: 400;">Reclamation Sheet</h3>
        
        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
        
        <p style="margin-bottom: 30px;">Please sign in to access the scanner.</p>

        <button id="login-btn" class="btn btn-reclamation active" style="width: 100%; opacity: 1; filter: none;">
            LOGIN WITH AZURE
        </button>
    </div>
</body>
</html>



<script src="https://alcdn.msauth.net/browser/2.30.0/js/msal-browser.min.js"></script>
<script>
    const msalConfig = {
        auth: {
            clientId: "6b6d2509-99da-40aa-a826-31fe6d400328", 
            authority: "https://login.microsoftonline.com/90f3f200-a8e1-42dc-947a-65f9fc0cd0b4",
            redirectUri: window.location.origin + "/index.html" // Fixed the typo here
        }
    };

    // 1. Create the instance
    const msalInstance = new msal.PublicClientApplication(msalConfig);

    // 2. WAKE UP the library (New required step)
    msalInstance.initialize().then(() => {
        console.log("MSAL is ready!");
        
        // 3. Only now can we attach the click event
        document.getElementById('login-btn').addEventListener('click', () => {
            msalInstance.loginRedirect({
                scopes: ["user.read"]
            });
        });
    }).catch(err => {
        console.error("Initialization failed", err);
    });
</script>
